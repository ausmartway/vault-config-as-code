{
  "name": "${localWorkspaceFolderBasename}",
  "image": "yulei-devcontainer:latest",

  // Port forwarding for common services
  "forwardPorts": [
    8200,  // Vault
    8500,  // Consul
    3000,  // Common web app port
    5000,  // Common API port
    8080   // Alternative web port
  ],

  // Mount your SSH keys, AWS credentials, and kubeconfig
  "mounts": [
    "source=${localEnv:HOME}/.ssh,target=/root/.ssh,type=bind,consistency=cached,readonly",
    "source=${localEnv:HOME}/.aws,target=/root/.aws,type=bind,consistency=cached",
    "source=${localEnv:HOME}/.kube,target=/root/.kube,type=bind,consistency=cached",
    "source=${localEnv:HOME}/.gitconfig,target=/root/.gitconfig,type=bind,consistency=cached"
  ],

  // VS Code customizations
  "customizations": {
    "vscode": {
      "extensions": [
        "anthropic.claude-code",
        "hashicorp.terraform"
      ],

      "settings": {
        "terraform.languageServer.enable": true,
        "terraform.experimentalFeatures.validateOnSave": true,
        "editor.formatOnSave": true
      }
    }
  },

  // Run after container starts
  "postStartCommand": "echo 'âœ… DevContainer ready! HashiCorp stack loaded.'",

  // Set the default user
  "remoteUser": "root",

  // Environment variables
  "remoteEnv": {
    "TZ": "Australia/Sydney",
    "VAULT_SKIP_VERIFY": "true"
  },

  // Container run arguments
  "runArgs": [
    "--network=host"
  ]
}
